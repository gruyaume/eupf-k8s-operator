name: eupf-k8s
type: charm
title: eUPF K8s
summary: eUPF K8s
description: eUPF K8s
bases:
  - build-on:
    - name: ubuntu
      channel: "22.04"
    run-on:
    - name: ubuntu
      channel: "22.04"

parts:
  charm:
    build-packages:
      - cargo
      - rustc

containers:
  eupf:
    resource: eupf-image
    mounts:
      - storage: config
        location: /etc/eupf

resources:
  eupf-image:
    type: oci-image
    description: OCI image for eUPF
    upstream-source: ghcr.io/gruyaume/eupf:0.6.4

storage:
  config:
    type: filesystem
    minimum-size: 1M

config:
  options:
    logging-level:
      type: string
      default: debug
      description: Logging level.

requires:
  logging:
    interface: loki_push_api

provides:
  fiveg_n4:
    interface: fiveg_n4
  metrics-endpoint:
    interface: prometheus_scrape
